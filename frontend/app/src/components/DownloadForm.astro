<form id="downloadForm" class="space-y-4">
  <div>
    <label for="youtubeUrl" class="block text-sm font-medium text-gray-700">
      YouTube URL
    </label>
    <div class="mt-1">
      <input
        type="url"
        name="youtubeUrl"
        id="youtubeUrl"
        required
        class="shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md"
        placeholder="https://www.youtube.com/watch?v=..."
      />
    </div>
  </div>

  <div>
    <button
      type="submit"
      class="w-full inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
    >
      Download Audio
    </button>
  </div>
</form>

<script>
  const form = document.getElementById('downloadForm');
  
  form?.addEventListener('submit', async (e) => {
    e.preventDefault();
    const formData = new FormData(e.target as HTMLFormElement);
    const youtubeUrl = formData.get('youtubeUrl');

    try {
      const response = await fetch('http://localhost:8000/extract-audio', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ url: youtubeUrl }),
      });

      if (!response.ok) {
        throw new Error('Download failed');
      }

      // Refresh the page to show the new audio file
      window.location.reload();
    } catch (error) {
      console.error('Error:', error);
      alert('Failed to download audio. Please try again.');
    }
  });
</script> 